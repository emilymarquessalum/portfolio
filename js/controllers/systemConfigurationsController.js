import systemConfigurations from"../models/systemConfigurationsModel.js";import languageConfigurations from"./languageConfigurationsController.js";import SystemConfigurationsView from"../view/systemConfigurationsView.js";import mainController from"./mainController.js";class SystemConfigurationsController{constructor(){this.systemConfigurationsView=new SystemConfigurationsView(this),this.configurations=systemConfigurations}buildSystemConfigurations(){if(!this.attemptLoadConfigurations()){let o=this.systemConfigurationsView.template(this.configurations.getLanguageTranslations());document.getElementById("configurations-div").innerHTML=o,mainController.mainEventController.emit("startedConfigurations"),this.systemConfigurationsView.listenForm(o=>{this.submitConfigurations(o)})}}attemptLoadConfigurations(){const o=sessionStorage.getItem("language")||localStorage.getItem("language");return!!o&&(window.addEventListener("load",()=>{languageConfigurations.loadLanguage(o,!0),this.systemConfigurationsView.loadedConfigurations(!0),mainController.mainEventController.emit("finishedConfigurations")}),!0)}submitConfigurations(o){let n=languageConfigurations.getLanguage(),i=this.systemConfigurationsView.configurationForm.querySelector("#configuration-form-save-select");this.saveConfigurations(n,i),languageConfigurations.loadLanguage(n),this.systemConfigurationsView.loadedConfigurations(!1),mainController.mainEventController.emit("finishedConfigurations")}saveConfigurations(o,n){let i=n.value;this.saveConfiguration("language",o,i)}saveConfiguration(o,n,i){"session"!=i?"local"!=i||localStorage.setItem(o,n):sessionStorage.setItem(o,n)}}const systemConfigurationsController=new SystemConfigurationsController;systemConfigurationsController.buildSystemConfigurations();