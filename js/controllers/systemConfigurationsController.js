import systemConfigurations from"../models/systemConfigurationsModel.js";import languageConfigurations from"./languageConfigurationsController.js";import SystemConfigurationsView from"../view/systemConfigurationsView.js";import mainController from"./mainController.js";import Controller from"./controller.js";class SystemConfigurationsController extends Controller{constructor(){super(SystemConfigurationsView),this.configurations=systemConfigurations}startBehaviour(){systemConfigurationsController.buildSystemConfigurations()}buildSystemConfigurations(){if(!this.attemptLoadConfigurations()){let o=this.view.template(this.configurations.getLanguageTranslations());document.getElementById("configurations-div").innerHTML=o,mainController.mainEventController.emit("startedConfigurations"),this.view.listenForm(o=>{this.submitConfigurations(o)})}}attemptLoadConfigurations(){const o=sessionStorage.getItem("language")||localStorage.getItem("language");return!!o&&(window.addEventListener("load",()=>{languageConfigurations.loadLanguage(o,!0),this.view.loadedConfigurations(!0),mainController.mainEventController.emit("finishedConfigurations")}),!0)}submitConfigurations(o){let t=languageConfigurations.getLanguage(),n=this.view.configurationForm.querySelector("#configuration-form-save-select");this.saveConfigurations(t,n),languageConfigurations.loadLanguage(t),this.view.loadedConfigurations(!1),mainController.mainEventController.emit("finishedConfigurations")}saveConfigurations(o,t){let n=t.value;this.saveConfiguration("language",o,n)}saveConfiguration(o,t,n){"session"!=n?"local"!=n||localStorage.setItem(o,t):sessionStorage.setItem(o,t)}}const systemConfigurationsController=new SystemConfigurationsController;